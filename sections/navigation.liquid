<script src="{{ 'cart-drawer.js' | asset_url }}" defer="defer"></script>
<nav>
    <ul class="nav-primary search-hide list-none flex-1 flex gap-[24px] h-full">
        {% assign menuItems = "apparel,objects,featured" | split: ',' %}
        {% for menuItem in menuItems %}
            <li class="menu__item level--1 text-black-600 ui-base has-dropdown h-full">
                <a class="menu__link h-full flex items-center">{{ menuItem | capitalize }}</a>
                <div class="menu__dropdown w-screen bg-white absolute top-full left-0 py-s10 px-s13">
                    <div class="flex max-w-[1200px] mx-auto bg-white gap-s8 z-10">
                        {% for column in section.blocks %}
                            {% if column.settings.menu == menuItem %}
                                {% if column.type == "link-list" %}
                                    <div class="menu-column flex-1">
                                        <ul class="dropdown_list--level-1 list-none ui-base">
                                            {% for link in column.settings.linkList.links %}
                                                <li class="dropdown__list-item--level-1">
                                                    <a href="{{ link.url }}" class="dropdown__link--level-1">{{ link.title }}</a>
                                                    {% assign totalSublinks = link.links | size %}
                                                    {% if totalSublinks > 0 %}
                                                        <ul class="dropdown__list--level-2 list-none">
                                                            {% for link in link.links %}
                                                                <li class="dropdown__list-item--level-2">
                                                                    <a href="{{ link.url }}" class="dropdown__link--level-2">{{ link.title }}</a>
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                    {% endif %}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                {% elsif column.type == "feature-column" %}
                                    <div class="menu-column flex-1">
                                        <img src="{{ column.settings.featuredImage | image_url }}" class="object-cover"/>
                                        <a href="{{ column.settings.linkDest }}" class="btn btn--borderless mt-s6">{{ column.settings.label }}</a>
                                    </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </li>
        {% endfor %}
    </ul>
    <img src="{{ 'Logo-Wharf-Horizontal.svg' | asset_url }}" alt="The Wharf Store" width="350" height="35" class="search-hide" loading="lazy"/>
    <div class="flex-1 flex justify-end items-center">

        <div class="p-s2 search flex">
            <button id="searchButton" onclick="document.querySelector('nav').classList.toggle('search-mode');">
                <img src="{{ '24-search.svg' | asset_url }}" width="24" height="24" loading="lazy"/>
            </button>
            <input/>
        </div>
        <a href="{{ routes.cart_url }}" id="cart-icon-bubble" class="search-hide p-s2 ml-s5">
            <img src="{{ '24-shopping-cart.svg' | asset_url }}" width="24" height="24" loading="lazy"/>
        </a>
        <a class="btn btn--sm search-hide ml-[36px]" href="/checkout">
        Checkout
        </a>
    </div>
</nav>


{% schema %}
    {
        "name": "nav",
        "class": "z-10 relative px-s5 lg:px-72",
        "max_blocks": 12,
        "blocks": [
            {
                "name": "Link List",
                "type": "link-list",
                "settings": [
                    {
                        "type": "select",
                        "id": "menu",
                        "label": "Menu",
                        "options": [
                            {
                            "value": "apparel",
                            "label": "Apparel"
                            },
                            {
                            "value": "objects",
                            "label": "Objects"
                            },
                            {
                            "value": "featured",
                            "label": "Featured"
                            }
                        ]
                    },
                    {
                        "type": "link_list",
                        "id": "linkList",
                        "label": "Menu"
                    }
                ]
            },
            {
                "name": "Feature Column",
                "type": "feature-column",
                "settings": [
                        {
                        "type": "select",
                        "id": "menu",
                        "label": "Menu",
                        "options": [
                            {
                            "value": "apparel",
                            "label": "Apparel"
                            },
                            {
                            "value": "objects",
                            "label": "Objects"
                            },
                            {
                            "value": "featured",
                            "label": "Featured"
                            }
                        ]
                    },
                    {
                        "type": "text",
                        "id":"label",
                        "label":"Link Label"
                    },
                    {
                        "type": "page",
                        "id": "linkDest",
                        "label": "Link Destination"
                    },
                    {
                        "type": "image_picker",
                        "id": "featuredImage",
                        "label": "Featured Image"
                    }
                ]
            }
        ]
    }
{% endschema %}
